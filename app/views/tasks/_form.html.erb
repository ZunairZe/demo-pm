<%= form_with(model: [@task.project, @task]) do |f| %>
  <% if @task.errors.any? %>
    <div id="error_explanation" class="bg-danger">
      <% @task.errors.each do |error| %>
        <%= error.full_message %><br>
      <% end %>
    </div>
  <% end %>

  <% if current_user.admin == true %>
    <div class="form-group">
      <%= f.label :name %><br />
      <%= f.text_field :name, required: true, autofocus: true, class: 'form-control' %>
    </div>
    <div class="form-group">
      <%= f.label :description %><br />
      <%= f.text_area :description, class: 'form-control' %>
    </div>
    <div class="form-group">
      <%= f.label :hours %><br />
      <%= f.text_field :hours, required: true, class: 'form-control' %>
    </div>
    <div class="form-group">
      <%= f.label "Starting Date" %>
      <%= f.date_field :starting_date, required: true, class: 'form-control' %>
    </div>
    <div class="form-group">
      <%= f.label "Ending Date" %>
      <%= f.date_field :ending_date, required: true, class: 'form-control' %>
    </div>
    <div class="form-group">
      <%= f.label "Select Employee" %><br />
      <%= f.collection_select(:user_id, @project.users, :id, :name, {:prompt=>true}, {:class=>'form-control'}) %>
    </div>
  <%else%>
    <div class="form-group">
      <%= f.label :name %><br />
      <%= f.text_field :name, class: "form-control", :readonly => true %>
    </div>
    <div class="form-group">
      <%= f.label :hours_worked %><br />
      <%= f.text_field :hours_worked, class: "form-control" %>
    </div>
    <div class="field">
      <%= f.check_box :status, {}, "complete", "pending" %>
      <%= f.label :mark_as_complete %> 
    </div>
  <%end%>
  <div class="actions">
    <%= f.submit class: 'btn btn-warning mt-2' %>
  </div>
<% end %>