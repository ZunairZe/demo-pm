<div class="card">
  <center class="mt-3"><h6><b>View Project</b></h6></center> <hr>
  <div class="card-body">
    <h4 class='card-title d-flex justify-content-between mb-4'>
      <span><b>Name: </b><%= @project.name %></span>
      <div>
        <%= link_to "Create Task", new_project_task_path(@task.project, @task), class: "btn btn-warning" %>
        <%= link_to "Assign Tasks", project_tasks_path(@project), class: "btn btn-info" %>
        <%= link_to "Edit Project", edit_project_path(@project), class: "btn btn-secondary" %>
        <%= link_to "Destroy", @project, method: :delete, class: "btn btn-dark", data: { confirm: "Are you sure?" } %>
      </div>
    </h4>

    <table>
      <tr>
        <td><b>Description: </b></td>
        <td><%= @project.description %></td>
      </tr>
      <tr>
        <td><b>Hours required: </b></td>
        <td><%= @project.hours %></td>
      </tr>
      <tr>
        <td><b>Tasks created: </b></td>
        <td><%= @project.tasks.count %></td>
      </tr>
      <tr>
        <td><b>Manager: </b></td>
        <td><%= User.find(@project.user_id).name %></td>
      </tr>
      <tr>
        <td><b>Status: </b></td>
        <td><%= @project.status %></td>
      </tr>
    </table> <br> <hr> <br>

    <h4>Tasks</h4>
    <% @project.tasks.each do |task| %>
      <% if task.persisted? %>
        <div class="card mb-3">
          <div class="card-body">
            <div class='d-flex justify-content-between'>
              <span class="badge badge-primary mb-3">Status: <%= task.status %></span> | 
              <span class="badge badge-primary mb-3">Total hours: <%= task.hours %></span> | 
              <span class="badge badge-primary mb-3">Hours worked: <%= task.hours_worked %></span>
              <div>
                <%= link_to "Assign", assign_project_task_path(task.project, task), class: "btn btn-light btn-secondary" %>
                <%= link_to "Edit", edit_project_task_path(task.project, task), class: "btn btn-light btn-secondary" %>
                <%= link_to "Destroy", [task.project, task], method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-secondary btn-sm" %>
              </div>
            </div>
            <%= link_to project_task_path(@project, task), class: "text-decoration-none" do %>
              <h5 class="card-title mb-2">
                <span><%= task.name %></span>
                <p><%= task.description %></p>
              </h5>
            <% end %>
          </div>
        </div>
      <% end %>
    <% end %>

  </div>
</div>
